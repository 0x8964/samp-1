; Listing generated by Microsoft (R) Optimizing Compiler Version 18.00.31101.0 

	TITLE	Z:\sampsrc\02Xu1\raknet\PacketFileLogger.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMTD
INCLUDELIB OLDNAMES

PUBLIC	??1PacketFileLogger@@UAE@XZ			; PacketFileLogger::~PacketFileLogger
PUBLIC	?OnAttach@PacketFileLogger@@UAEXPAVRakPeerInterface@@@Z ; PacketFileLogger::OnAttach
PUBLIC	?WriteLog@PacketFileLogger@@UAEXPBD@Z		; PacketFileLogger::WriteLog
PUBLIC	??_GPacketFileLogger@@UAEPAXI@Z			; PacketFileLogger::`scalar deleting destructor'
PUBLIC	??_7PacketFileLogger@@6B@			; PacketFileLogger::`vftable'
PUBLIC	??_C@_0BA@NAOIJOAC@PacketLog?$CFi?4csv?$AA@	; `string'
PUBLIC	??_C@_02BKFDOEMK@wt?$AA@			; `string'
PUBLIC	??_R4PacketFileLogger@@6B@			; PacketFileLogger::`RTTI Complete Object Locator'
PUBLIC	??_R0?AVPacketFileLogger@@@8			; PacketFileLogger `RTTI Type Descriptor'
PUBLIC	??_R3PacketFileLogger@@8			; PacketFileLogger::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2PacketFileLogger@@8			; PacketFileLogger::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@PacketFileLogger@@8		; PacketFileLogger::`RTTI Base Class Descriptor at (0,-1,0,64)'
PUBLIC	??_R1A@?0A@EA@PacketLogger@@8			; PacketLogger::`RTTI Base Class Descriptor at (0,-1,0,64)'
PUBLIC	??_R0?AVPacketLogger@@@8			; PacketLogger `RTTI Type Descriptor'
PUBLIC	??_R3PacketLogger@@8				; PacketLogger::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2PacketLogger@@8				; PacketLogger::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@PluginInterface@@8		; PluginInterface::`RTTI Base Class Descriptor at (0,-1,0,64)'
PUBLIC	??_R0?AVPluginInterface@@@8			; PluginInterface `RTTI Type Descriptor'
PUBLIC	??_R3PluginInterface@@8				; PluginInterface::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2PluginInterface@@8				; PluginInterface::`RTTI Base Class Array'
EXTRN	??3@YAXPAX@Z:PROC				; operator delete
EXTRN	?OnDetach@PluginInterface@@UAEXPAVRakPeerInterface@@@Z:PROC ; PluginInterface::OnDetach
EXTRN	?OnInitialize@PluginInterface@@UAEXPAVRakPeerInterface@@@Z:PROC ; PluginInterface::OnInitialize
EXTRN	?Update@PluginInterface@@UAEXPAVRakPeerInterface@@@Z:PROC ; PluginInterface::Update
EXTRN	?OnReceive@PluginInterface@@UAE?AW4PluginReceiveResult@@PAVRakPeerInterface@@PAUPacket@@@Z:PROC ; PluginInterface::OnReceive
EXTRN	?OnDisconnect@PluginInterface@@UAEXPAVRakPeerInterface@@@Z:PROC ; PluginInterface::OnDisconnect
EXTRN	?OnCloseConnection@PluginInterface@@UAEXPAVRakPeerInterface@@UPlayerID@@@Z:PROC ; PluginInterface::OnCloseConnection
EXTRN	??1PacketLogger@@UAE@XZ:PROC			; PacketLogger::~PacketLogger
EXTRN	?OnAttach@PacketLogger@@UAEXPAVRakPeerInterface@@@Z:PROC ; PacketLogger::OnAttach
EXTRN	?OnDirectSocketSend@PacketLogger@@UAEXPBDIUPlayerID@@@Z:PROC ; PacketLogger::OnDirectSocketSend
EXTRN	?OnDirectSocketReceive@PacketLogger@@UAEXPBDIUPlayerID@@@Z:PROC ; PacketLogger::OnDirectSocketReceive
EXTRN	?OnInternalPacket@PacketLogger@@UAEXPAUInternalPacket@@IUPlayerID@@I_N@Z:PROC ; PacketLogger::OnInternalPacket
EXTRN	?LogHeader@PacketLogger@@UAEXXZ:PROC		; PacketLogger::LogHeader
EXTRN	?SetPrintID@PacketLogger@@UAEX_N@Z:PROC		; PacketLogger::SetPrintID
EXTRN	?SetPrintAcks@PacketLogger@@UAEX_N@Z:PROC	; PacketLogger::SetPrintAcks
EXTRN	?UserIDTOString@PacketLogger@@MAEPADE@Z:PROC	; PacketLogger::UserIDTOString
EXTRN	_fclose:PROC
EXTRN	_fopen:PROC
EXTRN	_fputs:PROC
EXTRN	_sprintf:PROC
EXTRN	??_EPacketFileLogger@@UAEPAXI@Z:PROC		; PacketFileLogger::`vector deleting destructor'
EXTRN	?GetTime@RakNet@@YAIXZ:PROC			; RakNet::GetTime
EXTRN	@_RTC_CheckStackVars@8:PROC
EXTRN	@__security_check_cookie@4:PROC
EXTRN	__RTC_CheckEsp:PROC
EXTRN	__RTC_InitBase:PROC
EXTRN	__RTC_Shutdown:PROC
EXTRN	??_7type_info@@6B@:QWORD			; type_info::`vftable'
EXTRN	___security_cookie:DWORD
;	COMDAT rtc$TMZ
rtc$TMZ	SEGMENT
__RTC_Shutdown.rtc$TMZ DD FLAT:__RTC_Shutdown
rtc$TMZ	ENDS
;	COMDAT rtc$IMZ
rtc$IMZ	SEGMENT
__RTC_InitBase.rtc$IMZ DD FLAT:__RTC_InitBase
rtc$IMZ	ENDS
;	COMDAT ??_R2PluginInterface@@8
rdata$r	SEGMENT
??_R2PluginInterface@@8 DD FLAT:??_R1A@?0A@EA@PluginInterface@@8 ; PluginInterface::`RTTI Base Class Array'
rdata$r	ENDS
;	COMDAT ??_R3PluginInterface@@8
rdata$r	SEGMENT
??_R3PluginInterface@@8 DD 00H				; PluginInterface::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	01H
	DD	FLAT:??_R2PluginInterface@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVPluginInterface@@@8
data$r	SEGMENT
??_R0?AVPluginInterface@@@8 DD FLAT:??_7type_info@@6B@	; PluginInterface `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVPluginInterface@@', 00H
data$r	ENDS
;	COMDAT ??_R1A@?0A@EA@PluginInterface@@8
rdata$r	SEGMENT
??_R1A@?0A@EA@PluginInterface@@8 DD FLAT:??_R0?AVPluginInterface@@@8 ; PluginInterface::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	00H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3PluginInterface@@8
rdata$r	ENDS
;	COMDAT ??_R2PacketLogger@@8
rdata$r	SEGMENT
??_R2PacketLogger@@8 DD FLAT:??_R1A@?0A@EA@PacketLogger@@8 ; PacketLogger::`RTTI Base Class Array'
	DD	FLAT:??_R1A@?0A@EA@PluginInterface@@8
rdata$r	ENDS
;	COMDAT ??_R3PacketLogger@@8
rdata$r	SEGMENT
??_R3PacketLogger@@8 DD 00H				; PacketLogger::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	02H
	DD	FLAT:??_R2PacketLogger@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVPacketLogger@@@8
data$r	SEGMENT
??_R0?AVPacketLogger@@@8 DD FLAT:??_7type_info@@6B@	; PacketLogger `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVPacketLogger@@', 00H
data$r	ENDS
;	COMDAT ??_R1A@?0A@EA@PacketLogger@@8
rdata$r	SEGMENT
??_R1A@?0A@EA@PacketLogger@@8 DD FLAT:??_R0?AVPacketLogger@@@8 ; PacketLogger::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	01H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3PacketLogger@@8
rdata$r	ENDS
;	COMDAT ??_R1A@?0A@EA@PacketFileLogger@@8
rdata$r	SEGMENT
??_R1A@?0A@EA@PacketFileLogger@@8 DD FLAT:??_R0?AVPacketFileLogger@@@8 ; PacketFileLogger::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	02H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3PacketFileLogger@@8
rdata$r	ENDS
;	COMDAT ??_R2PacketFileLogger@@8
rdata$r	SEGMENT
??_R2PacketFileLogger@@8 DD FLAT:??_R1A@?0A@EA@PacketFileLogger@@8 ; PacketFileLogger::`RTTI Base Class Array'
	DD	FLAT:??_R1A@?0A@EA@PacketLogger@@8
	DD	FLAT:??_R1A@?0A@EA@PluginInterface@@8
rdata$r	ENDS
;	COMDAT ??_R3PacketFileLogger@@8
rdata$r	SEGMENT
??_R3PacketFileLogger@@8 DD 00H				; PacketFileLogger::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	03H
	DD	FLAT:??_R2PacketFileLogger@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVPacketFileLogger@@@8
data$r	SEGMENT
??_R0?AVPacketFileLogger@@@8 DD FLAT:??_7type_info@@6B@	; PacketFileLogger `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVPacketFileLogger@@', 00H
data$r	ENDS
;	COMDAT ??_R4PacketFileLogger@@6B@
rdata$r	SEGMENT
??_R4PacketFileLogger@@6B@ DD 00H			; PacketFileLogger::`RTTI Complete Object Locator'
	DD	00H
	DD	00H
	DD	FLAT:??_R0?AVPacketFileLogger@@@8
	DD	FLAT:??_R3PacketFileLogger@@8
rdata$r	ENDS
;	COMDAT ??_C@_02BKFDOEMK@wt?$AA@
CONST	SEGMENT
??_C@_02BKFDOEMK@wt?$AA@ DB 'wt', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0BA@NAOIJOAC@PacketLog?$CFi?4csv?$AA@
CONST	SEGMENT
??_C@_0BA@NAOIJOAC@PacketLog?$CFi?4csv?$AA@ DB 'PacketLog%i.csv', 00H ; `string'
CONST	ENDS
;	COMDAT ??_7PacketFileLogger@@6B@
CONST	SEGMENT
??_7PacketFileLogger@@6B@ DD FLAT:??_R4PacketFileLogger@@6B@ ; PacketFileLogger::`vftable'
	DD	FLAT:?OnAttach@PacketFileLogger@@UAEXPAVRakPeerInterface@@@Z
	DD	FLAT:?OnDetach@PluginInterface@@UAEXPAVRakPeerInterface@@@Z
	DD	FLAT:?OnInitialize@PluginInterface@@UAEXPAVRakPeerInterface@@@Z
	DD	FLAT:?Update@PluginInterface@@UAEXPAVRakPeerInterface@@@Z
	DD	FLAT:?OnReceive@PluginInterface@@UAE?AW4PluginReceiveResult@@PAVRakPeerInterface@@PAUPacket@@@Z
	DD	FLAT:?OnDisconnect@PluginInterface@@UAEXPAVRakPeerInterface@@@Z
	DD	FLAT:?OnCloseConnection@PluginInterface@@UAEXPAVRakPeerInterface@@UPlayerID@@@Z
	DD	FLAT:?OnDirectSocketSend@PacketLogger@@UAEXPBDIUPlayerID@@@Z
	DD	FLAT:?OnDirectSocketReceive@PacketLogger@@UAEXPBDIUPlayerID@@@Z
	DD	FLAT:?OnInternalPacket@PacketLogger@@UAEXPAUInternalPacket@@IUPlayerID@@I_N@Z
	DD	FLAT:??_EPacketFileLogger@@UAEPAXI@Z
	DD	FLAT:?LogHeader@PacketLogger@@UAEXXZ
	DD	FLAT:?WriteLog@PacketFileLogger@@UAEXPBD@Z
	DD	FLAT:?SetPrintID@PacketLogger@@UAEX_N@Z
	DD	FLAT:?SetPrintAcks@PacketLogger@@UAEX_N@Z
	DD	FLAT:?UserIDTOString@PacketLogger@@MAEPADE@Z
CONST	ENDS
; Function compile flags: /Odtp /RTCsu /ZI
;	COMDAT ??_GPacketFileLogger@@UAEPAXI@Z
_TEXT	SEGMENT
_this$ = -8						; size = 4
___flags$ = 8						; size = 4
??_GPacketFileLogger@@UAEPAXI@Z PROC			; PacketFileLogger::`scalar deleting destructor', COMDAT
; _this$ = ecx
	push	ebp
	mov	ebp, esp
	sub	esp, 204				; 000000ccH
	push	ebx
	push	esi
	push	edi
	push	ecx
	lea	edi, DWORD PTR [ebp-204]
	mov	ecx, 51					; 00000033H
	mov	eax, -858993460				; ccccccccH
	rep stosd
	pop	ecx
	mov	DWORD PTR _this$[ebp], ecx
	mov	ecx, DWORD PTR _this$[ebp]
	call	??1PacketFileLogger@@UAE@XZ		; PacketFileLogger::~PacketFileLogger
	mov	eax, DWORD PTR ___flags$[ebp]
	and	eax, 1
	je	SHORT $LN1@scalar
	mov	eax, DWORD PTR _this$[ebp]
	push	eax
	call	??3@YAXPAX@Z				; operator delete
	add	esp, 4
$LN1@scalar:
	mov	eax, DWORD PTR _this$[ebp]
	pop	edi
	pop	esi
	pop	ebx
	add	esp, 204				; 000000ccH
	cmp	ebp, esp
	call	__RTC_CheckEsp
	mov	esp, ebp
	pop	ebp
	ret	4
??_GPacketFileLogger@@UAEPAXI@Z ENDP			; PacketFileLogger::`scalar deleting destructor'
_TEXT	ENDS
; Function compile flags: /Odtp /RTCsu /ZI
; File z:\sampsrc\02xu1\raknet\packetfilelogger.cpp
;	COMDAT ?WriteLog@PacketFileLogger@@UAEXPBD@Z
_TEXT	SEGMENT
_this$ = -8						; size = 4
_str$ = 8						; size = 4
?WriteLog@PacketFileLogger@@UAEXPBD@Z PROC		; PacketFileLogger::WriteLog, COMDAT
; _this$ = ecx

; 20   : {

	push	ebp
	mov	ebp, esp
	sub	esp, 204				; 000000ccH
	push	ebx
	push	esi
	push	edi
	push	ecx
	lea	edi, DWORD PTR [ebp-204]
	mov	ecx, 51					; 00000033H
	mov	eax, -858993460				; ccccccccH
	rep stosd
	pop	ecx
	mov	DWORD PTR _this$[ebp], ecx

; 21   : 	fputs(str, packetLogFile);

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+10]
	push	ecx
	mov	edx, DWORD PTR _str$[ebp]
	push	edx
	call	_fputs
	add	esp, 8

; 22   : }

	pop	edi
	pop	esi
	pop	ebx
	add	esp, 204				; 000000ccH
	cmp	ebp, esp
	call	__RTC_CheckEsp
	mov	esp, ebp
	pop	ebp
	ret	4
?WriteLog@PacketFileLogger@@UAEXPBD@Z ENDP		; PacketFileLogger::WriteLog
_TEXT	ENDS
; Function compile flags: /Odtp /RTCsu /ZI
; File z:\sampsrc\02xu1\raknet\packetfilelogger.cpp
;	COMDAT ?OnAttach@PacketFileLogger@@UAEXPAVRakPeerInterface@@@Z
_TEXT	SEGMENT
_filename$ = -276					; size = 256
_this$ = -12						; size = 4
__$ArrayPad$ = -4					; size = 4
_peer$ = 8						; size = 4
?OnAttach@PacketFileLogger@@UAEXPAVRakPeerInterface@@@Z PROC ; PacketFileLogger::OnAttach, COMDAT
; _this$ = ecx

; 9    : {

	push	ebp
	mov	ebp, esp
	sub	esp, 472				; 000001d8H
	push	ebx
	push	esi
	push	edi
	push	ecx
	lea	edi, DWORD PTR [ebp-472]
	mov	ecx, 118				; 00000076H
	mov	eax, -858993460				; ccccccccH
	rep stosd
	pop	ecx
	mov	eax, DWORD PTR ___security_cookie
	xor	eax, ebp
	mov	DWORD PTR __$ArrayPad$[ebp], eax
	mov	DWORD PTR _this$[ebp], ecx

; 10   : 	PacketLogger::OnAttach(peer);

	mov	eax, DWORD PTR _peer$[ebp]
	push	eax
	mov	ecx, DWORD PTR _this$[ebp]
	call	?OnAttach@PacketLogger@@UAEXPAVRakPeerInterface@@@Z ; PacketLogger::OnAttach

; 11   : 
; 12   : 	// Open file for writing
; 13   : 	char filename[256];
; 14   : 	sprintf(filename, "PacketLog%i.csv", RakNet::GetTime());

	call	?GetTime@RakNet@@YAIXZ			; RakNet::GetTime
	push	eax
	push	OFFSET ??_C@_0BA@NAOIJOAC@PacketLog?$CFi?4csv?$AA@
	lea	eax, DWORD PTR _filename$[ebp]
	push	eax
	call	_sprintf
	add	esp, 12					; 0000000cH

; 15   : 	packetLogFile = fopen(filename, "wt");

	push	OFFSET ??_C@_02BKFDOEMK@wt?$AA@
	lea	eax, DWORD PTR _filename$[ebp]
	push	eax
	call	_fopen
	add	esp, 8
	mov	ecx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [ecx+10], eax

; 16   : 	LogHeader();

	mov	eax, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [eax]
	mov	esi, esp
	mov	ecx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+44]
	call	eax
	cmp	esi, esp
	call	__RTC_CheckEsp

; 17   : }

	push	edx
	mov	ecx, ebp
	push	eax
	lea	edx, DWORD PTR $LN5@OnAttach
	call	@_RTC_CheckStackVars@8
	pop	eax
	pop	edx
	pop	edi
	pop	esi
	pop	ebx
	mov	ecx, DWORD PTR __$ArrayPad$[ebp]
	xor	ecx, ebp
	call	@__security_check_cookie@4
	add	esp, 472				; 000001d8H
	cmp	ebp, esp
	call	__RTC_CheckEsp
	mov	esp, ebp
	pop	ebp
	ret	4
$LN5@OnAttach:
	DD	1
	DD	$LN4@OnAttach
$LN4@OnAttach:
	DD	-276					; fffffeecH
	DD	256					; 00000100H
	DD	$LN3@OnAttach
$LN3@OnAttach:
	DB	102					; 00000066H
	DB	105					; 00000069H
	DB	108					; 0000006cH
	DB	101					; 00000065H
	DB	110					; 0000006eH
	DB	97					; 00000061H
	DB	109					; 0000006dH
	DB	101					; 00000065H
	DB	0
?OnAttach@PacketFileLogger@@UAEXPAVRakPeerInterface@@@Z ENDP ; PacketFileLogger::OnAttach
_TEXT	ENDS
; Function compile flags: /Odtp /RTCsu /ZI
; File z:\sampsrc\02xu1\raknet\packetfilelogger.cpp
;	COMDAT ??1PacketFileLogger@@UAE@XZ
_TEXT	SEGMENT
_this$ = -8						; size = 4
??1PacketFileLogger@@UAE@XZ PROC			; PacketFileLogger::~PacketFileLogger, COMDAT
; _this$ = ecx

; 5    : {

	push	ebp
	mov	ebp, esp
	sub	esp, 204				; 000000ccH
	push	ebx
	push	esi
	push	edi
	push	ecx
	lea	edi, DWORD PTR [ebp-204]
	mov	ecx, 51					; 00000033H
	mov	eax, -858993460				; ccccccccH
	rep stosd
	pop	ecx
	mov	DWORD PTR _this$[ebp], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax], OFFSET ??_7PacketFileLogger@@6B@

; 6    : 	fclose(packetLogFile);

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+10]
	push	ecx
	call	_fclose
	add	esp, 4

; 7    : }

	mov	ecx, DWORD PTR _this$[ebp]
	call	??1PacketLogger@@UAE@XZ			; PacketLogger::~PacketLogger
	pop	edi
	pop	esi
	pop	ebx
	add	esp, 204				; 000000ccH
	cmp	ebp, esp
	call	__RTC_CheckEsp
	mov	esp, ebp
	pop	ebp
	ret	0
??1PacketFileLogger@@UAE@XZ ENDP			; PacketFileLogger::~PacketFileLogger
_TEXT	ENDS
END
